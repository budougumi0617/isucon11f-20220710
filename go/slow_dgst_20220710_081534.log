
# 35.4s user time, 180ms system time, 121.80M rss, 129.00M vsz
# Current date: Sun Jul 10 08:16:10 2022
# Hostname: ip-172-31-38-11
# Files: /var/log/mysql/slow.log
# Overall: 271.99k total, 78 unique, 1.06k QPS, 0.41x concurrency ________
# Time range: 2022-07-10T08:11:43 to 2022-07-10T08:15:59
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           105s     1us   313ms   386us     1ms     3ms   103us
# Lock time          796ms       0   108ms     2us     1us   290us     1us
# Rows sent        420.31k       0      58    1.58    4.96    5.52       0
# Rows examine       5.34M       0  18.44k   20.60   62.76  278.78    0.99
# Bytes sent        66.42M       0  11.29k  256.07   1.20k  666.34   62.76
# Query size        34.62M       6 632.12k  133.45  487.09   1.69k   92.72
# Bytes receiv           0       0       0       0       0       0       0
# Created tmp            0       0       0       0       0       0       0
# Created tmp       12.40k       0       3    0.05       0    0.21       0
# Errno              7.46k       0   1.08k    0.03       0    5.32       0
# Read first         1.39k       0       2    0.01       0    0.07       0
# Read key           3.96M       0  19.77k   15.26    4.96  303.32    0.99
# Read last          3.55k       0       1    0.01       0    0.11       0
# Read next          2.57M       0  11.75k    9.91   49.17  174.83       0
# Read prev        149.90k       0     255    0.56       0    5.75       0
# Read rnd           9.66k       0       1    0.04       0    0.19       0
# Read rnd nex     163.55k       0     329    0.62       0    6.43       0
# Sort merge p          30       0       1    0.00       0    0.01       0
# Sort range c           0       0       0       0       0       0       0
# Sort rows         94.85k       0     328    0.36       0    5.80       0
# Sort scan co       2.65k       0       1    0.01       0    0.10       0

# Profile
# Rank Query ID                      Response time Calls R/Call V/M   Item
# ==== ============================= ============= ===== ====== ===== ====
#    1 0x8082220C07E2A565D306665B... 11.7935 11.2%    72 0.1638  0.06 SELECT users registrations courses registrations courses classes submissions
#    2 0x2BC75A9C3EB65F1EC570DFB4... 10.7921 10.3%  6123 0.0018  0.00 SELECT announcements courses registrations unread_announcements
#    3 0xA9A13C7DE4DE6522B8635F39... 10.7350 10.2%  2609 0.0041  0.01 SELECT users registrations courses classes submissions
#    4 0xFFFCA4D67EA0A788813031B8...  6.2133  5.9% 42819 0.0001  0.02 COMMIT
#    5 0x1F21068CC7652980263E8231...  5.9597  5.7%  6183 0.0010  0.00 SELECT unread_announcements
#    6 0xAE994A27799DADD410E84835...  5.5871  5.3% 10645 0.0005  0.00 SELECT classes submissions
#    7 0xF16955B9A50074ED04E1B8A5...  4.8854  4.6% 11948 0.0004  0.00 SELECT announcements courses unread_announcements
#    8 0x5A802CCF59216825CD74D1B8...  4.3705  4.2% 12132 0.0004  0.00 SELECT submissions
#    9 0x27543A651E60736B50443886...  4.3665  4.2% 11946 0.0004  0.00 UPDATE unread_announcements
#   10 0x6C0FF098D63D248BBF3D4058...  4.1986  4.0%  9892 0.0004  0.00 UPDATE submissions users
#   11 0x98DD1BA507AB79261637698A...  3.8347  3.6% 10602 0.0004  0.00 INSERT UPDATE submissions
#   12 0x4A879C906EDA9FDE22E01B64...  3.6199  3.4% 14542 0.0002  0.00 SELECT registrations
#   13 0x34680D6218DB2F97EAE350D3...  3.6106  3.4% 11572 0.0003  0.00 INSERT unread_announcements
#   14 0x83A9085E3002B5EB279F5514...  3.3021  3.1% 12132 0.0003  0.00 SELECT submissions
#   15 0x63C05502F034B2DB20500EA0...  2.5594  2.4% 11145 0.0002  0.01 SELECT classes
#   16 0xD22122C68747429FE1B81D07...  2.5424  2.4% 11273 0.0002  0.00 SELECT courses
#   17 0x2AD72D6A4885FC60A40B3350...  2.5157  2.4% 10606 0.0002  0.00 SELECT registrations
#   18 0x0CE2A86226457A4A9046E173...  2.2322  2.1% 10608 0.0002  0.00 SELECT courses
#   19 0x9E2DA589A20EC24C34E11DDE...  2.1530  2.0% 42838 0.0001  0.00 START
#   20 0x396201721CD58410E070DA94...  1.3097  1.2%  5889 0.0002  0.00 SELECT users
# MISC 0xMISC                         8.5086  8.1% 16411 0.0005   0.0 <58 ITEMS>

# Query 1: 0.95 QPS, 0.16x concurrency, ID 0x8082220C07E2A565D306665B3BC827B4 at byte 188215452
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2022-07-10T08:12:14 to 2022-07-10T08:13:30
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      72
# Exec time     11     12s   385us   313ms   164ms   293ms   103ms   198ms
# Lock time      0   277us     2us    24us     3us     3us     2us     3us
# Rows sent      0   3.40k       0      58   48.39   56.92   21.09   56.92
# Rows examine  20   1.08M      88  18.44k  15.40k  17.59k   6.50k  17.59k
# Bytes sent     0  54.69k      52     922  777.83  918.49  321.32  918.49
# Query size     0  60.05k     854     854     854     854       0     854
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    1     196       1       3    2.72    2.90    0.66    2.90
# Errno          0       0       0       0       0       0       0       0
# Read first     9     134       1       2    1.86    1.96    0.34    1.96
# Read key      29   1.16M      44  19.77k  16.50k  19.40k   7.18k  19.40k
# Read last      0       0       0       0       0       0       0       0
# Read next     26 705.84k      44  11.75k   9.80k  11.34k   4.19k  11.34k
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   4   6.94k       1     118   98.64  112.70   41.34  112.70
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (1/1%), 2022-07-10... (1/1%)... 70 more
# Hosts        localhost
# Start        2022-07-10... (1/1%), 2022-07-10... (1/1%)... 70 more
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##########
#   1ms  #####
#  10ms  ##############
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
#    SHOW TABLE STATUS LIKE 'registrations'\G
#    SHOW CREATE TABLE `registrations`\G
#    SHOW TABLE STATUS LIKE 'courses'\G
#    SHOW CREATE TABLE `courses`\G
#    SHOW TABLE STATUS LIKE 'classes'\G
#    SHOW CREATE TABLE `classes`\G
#    SHOW TABLE STATUS LIKE 'submissions'\G
#    SHOW CREATE TABLE `submissions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(`submissions`.`score` * `courses`.`credit`), 0) / 100 / `credits`.`credits` AS `gpa` FROM `users` JOIN (     SELECT `users`.`id` AS `user_id`, SUM(`courses`.`credit`) AS `credits`     FROM `users`     JOIN `registrations` ON `users`.`id` = `registrations`.`user_id`     JOIN `courses` ON `registrations`.`course_id` = `courses`.`id` AND `courses`.`status` = 'closed'     GROUP BY `users`.`id` ) AS `credits` ON `credits`.`user_id` = `users`.`id` JOIN `registrations` ON `users`.`id` = `registrations`.`user_id` JOIN `courses` ON `registrations`.`course_id` = `courses`.`id` AND `courses`.`status` = 'closed' LEFT JOIN `classes` ON `courses`.`id` = `classes`.`course_id` LEFT JOIN `submissions` ON `users`.`id` = `submissions`.`user_id` AND `submissions`.`class_id` = `classes`.`id` WHERE `users`.`type` = 'student' GROUP BY `users`.`id`\G

# Query 2: 76.54 QPS, 0.13x concurrency, ID 0x2BC75A9C3EB65F1EC570DFB4E3F111C5 at byte 171598859
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:15 to 2022-07-10T08:13:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    6123
# Exec time     10     11s   188us    36ms     2ms     7ms     3ms   799us
# Lock time      3    27ms     1us     3ms     4us     2us    51us     1us
# Rows sent     27 115.49k       0      21   19.31   20.43    4.99   20.43
# Rows examine  26   1.41M       0     950  240.82  719.66  236.21  102.22
# Bytes sent    24  16.40M     321   3.28k   2.74k   3.04k  653.17   2.89k
# Query size    10   3.57M     611     613  611.15  592.07       0  592.07
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key      25   1.02M       1     577  174.56  511.45  165.61   72.65
# Read last    100   3.55k       0       1    0.59    0.99    0.49    0.99
# Read next      9 245.11k       0     230   40.99  174.84   64.89       0
# Read prev     91 137.91k       0     255   23.06   88.31   31.07   19.46
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows     71  67.66k       0     190   11.32   40.45   23.79       0
# Sort scan co  91   2.43k       0       1    0.41    0.99    0.49       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 6106 more
# Hosts        localhost
# Start        2022-07-10... (1/0%), 2022-07-10... (1/0%)... 6121 more
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###############################################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'announcements'\G
#    SHOW CREATE TABLE `announcements`\G
#    SHOW TABLE STATUS LIKE 'courses'\G
#    SHOW CREATE TABLE `courses`\G
#    SHOW TABLE STATUS LIKE 'registrations'\G
#    SHOW CREATE TABLE `registrations`\G
#    SHOW TABLE STATUS LIKE 'unread_announcements'\G
#    SHOW CREATE TABLE `unread_announcements`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `announcements`.`id`, `courses`.`id` AS `course_id`, `courses`.`name` AS `course_name`, `announcements`.`title`, NOT `unread_announcements`.`is_deleted` AS `unread` FROM `announcements` JOIN `courses` ON `announcements`.`course_id` = `courses`.`id` JOIN `registrations` ON `courses`.`id` = `registrations`.`course_id` JOIN `unread_announcements` ON `announcements`.`id` = `unread_announcements`.`announcement_id` WHERE 1=1 AND `unread_announcements`.`user_id` = '01FF6J8XQSWY18GVCX62N55T19' AND `registrations`.`user_id` = '01FF6J8XQSWY18GVCX62N55T19' ORDER BY `announcements`.`id` DESC LIMIT 21 OFFSET 0\G

# Query 3: 33.88 QPS, 0.14x concurrency, ID 0xA9A13C7DE4DE6522B8635F3933142DB1 at byte 188041208
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:30
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2609
# Exec time     10     11s   214us    44ms     4ms    13ms     5ms     2ms
# Lock time      1    12ms     1us     2ms     4us     2us    44us     1us
# Rows sent     24 104.55k       1      50   41.04   49.17   15.36   49.17
# Rows examine  27   1.45M       7     755  582.04  719.66  229.02  719.66
# Bytes sent     1 987.26k      68     460  387.49  441.81  119.78  441.81
# Query size     3   1.12M     450     450     450     450       0     450
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp   20   2.55k       1       1       1       1       0       1
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key      37   1.48M       9     757  596.74  755.64  240.92  755.64
# Read last      0       0       0       0       0       0       0       0
# Read next     19 513.14k       3     255  201.40  246.02   77.25  246.02
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex  65 107.10k       2      51   42.04   49.17   15.03   49.17
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 2602 more
# Hosts        localhost
# Start        2022-07-10... (1/0%), 2022-07-10... (1/0%)... 2607 more
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###########
#   1ms  ################################################################
#  10ms  ############
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
#    SHOW TABLE STATUS LIKE 'registrations'\G
#    SHOW CREATE TABLE `registrations`\G
#    SHOW TABLE STATUS LIKE 'courses'\G
#    SHOW CREATE TABLE `courses`\G
#    SHOW TABLE STATUS LIKE 'classes'\G
#    SHOW CREATE TABLE `classes`\G
#    SHOW TABLE STATUS LIKE 'submissions'\G
#    SHOW CREATE TABLE `submissions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(`submissions`.`score`), 0) AS `total_score` FROM `users` JOIN `registrations` ON `users`.`id` = `registrations`.`user_id` JOIN `courses` ON `registrations`.`course_id` = `courses`.`id` LEFT JOIN `classes` ON `courses`.`id` = `classes`.`course_id` LEFT JOIN `submissions` ON `users`.`id` = `submissions`.`user_id` AND `submissions`.`class_id` = `classes`.`id` WHERE `courses`.`id` = '01G7KJN5WA7QR7PF9546B6M6MC' GROUP BY `users`.`id`\G

# Query 4: 522.18 QPS, 0.08x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 146214869
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   42819
# Exec time      5      6s    13us   102ms   145us   403us     2ms    47us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Bytes sent     0 459.97k      11      11      11      11       0      11
# Query size     0 250.89k       6       6       6       6       0       6
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0       0       0       0       0       0       0       0
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 42720 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 42806 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #####
#   1ms  #
#  10ms  #
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 5: 77.29 QPS, 0.07x concurrency, ID 0x1F21068CC7652980263E82315944F5FD at byte 111351197
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:15 to 2022-07-10T08:13:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    6183
# Exec time      5      6s    95us    40ms   963us     4ms     2ms   348us
# Lock time      2    24ms       0     6ms     3us     1us   101us     1us
# Rows sent      1   6.04k       1       1       1       1       0       1
# Rows examine   9 515.36k       0     192   85.35  174.84   51.06   80.10
# Bytes sent     0 380.87k      63      64   63.08   62.76       0   62.76
# Query size     1 670.23k     111     111     111     111       0     111
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0   6.04k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next     19 515.36k       0     192   85.35  174.84   51.06   80.10
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 6164 more
# Hosts        localhost
# Start        2022-07-10... (1/0%), 2022-07-10... (1/0%)... 6181 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'unread_announcements'\G
#    SHOW CREATE TABLE `unread_announcements`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM `unread_announcements` WHERE `user_id` = '01FF6J8Y04VF4J0P8YYNYHB5GM' AND NOT `is_deleted`\G

# Query 6: 168.97 QPS, 0.09x concurrency, ID 0xAE994A27799DADD410E848351C4DFF53 at byte 46820639
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   10645
# Exec time      5      6s   121us    36ms   524us     2ms     1ms   214us
# Lock time      6    51ms       0     9ms     4us     1us   102us     1us
# Rows sent      6  29.16k       1       5    2.81    4.96    1.34    2.90
# Rows examine   0  47.33k       1       9    4.55    8.91    2.68    4.96
# Bytes sent    16  11.07M     604   1.75k   1.06k   1.53k  314.57   1.04k
# Query size     8   3.03M     298     298     298     298       0     298
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  39.56k       2       6    3.81    5.75    1.32    3.89
# Read last      0       0       0       0       0       0       0       0
# Read next      1  29.16k       1       5    2.81    4.96    1.34    2.90
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 10608 more
# Hosts        localhost
# Start        2022-07-10... (1/0%), 2022-07-10... (1/0%)... 10643 more
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'classes'\G
#    SHOW CREATE TABLE `classes`\G
#    SHOW TABLE STATUS LIKE 'submissions'\G
#    SHOW CREATE TABLE `submissions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `classes`.*, `submissions`.`user_id` IS NOT NULL AS `submitted` FROM `classes` LEFT JOIN `submissions` ON `classes`.`id` = `submissions`.`class_id` AND `submissions`.`user_id` = '01FF6J8XS3TPHGRQHADSEQ6V1Y' WHERE `classes`.`course_id` = '01G7KJN54KW8E9MRHQ9RJZHFTR' ORDER BY `classes`.`part`\G

# Query 7: 192.71 QPS, 0.08x concurrency, ID 0xF16955B9A50074ED04E1B8A511E35989 at byte 140054838
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:14 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   11948
# Exec time      4      5s    97us    13ms   408us     2ms   784us   167us
# Lock time      6    53ms     1us     7ms     4us     2us    78us     1us
# Rows sent      2  11.67k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  11.67k       0       1    1.00    0.99    0.01    0.99
# Bytes sent    12   8.26M     390     905  724.89  793.42   56.47  685.39
# Query size    16   5.73M     503     503     503     503       0     503
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  35.00k       2       3    3.00    2.90    0.01    2.90
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 11905 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (1/0%)... 11945 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'announcements'\G
#    SHOW CREATE TABLE `announcements`\G
#    SHOW TABLE STATUS LIKE 'courses'\G
#    SHOW CREATE TABLE `courses`\G
#    SHOW TABLE STATUS LIKE 'unread_announcements'\G
#    SHOW CREATE TABLE `unread_announcements`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `announcements`.`id`, `courses`.`id` AS `course_id`, `courses`.`name` AS `course_name`, `announcements`.`title`, `announcements`.`message`, NOT `unread_announcements`.`is_deleted` AS `unread` FROM `announcements` JOIN `courses` ON `courses`.`id` = `announcements`.`course_id` JOIN `unread_announcements` ON `unread_announcements`.`announcement_id` = `announcements`.`id` WHERE `announcements`.`id` = '01G7KJPK8CJ2NK7WZ9DBF6VSC4' AND `unread_announcements`.`user_id` = '01FF6J8Y27X818BBZTH0VPK38Z'\G

# Query 8: 157.56 QPS, 0.06x concurrency, ID 0x5A802CCF59216825CD74D1B8629C98E7 at byte 179918796
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:30
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   12132
# Exec time      4      4s    81us    18ms   360us     1ms   580us   144us
# Lock time      3    31ms       0     1ms     2us     1us    24us     1us
# Rows sent      2  11.85k       1       1       1       1       0       1
# Rows examine   8 469.31k       0      50   39.61   49.17   15.24   46.83
# Bytes sent     1 756.94k      63      64   63.89   62.76       0   62.76
# Query size     2 971.51k      82      82      82      82       0      82
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  11.85k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next     17 469.31k       0      50   39.61   49.17   15.24   46.83
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 12104 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 12115 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'submissions'\G
#    SHOW CREATE TABLE `submissions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM `submissions` WHERE `class_id` = '01G7KJNC3R6XTZ3QRGBJN7CY1J'\G

# Query 9: 192.68 QPS, 0.07x concurrency, ID 0x27543A651E60736B50443886E289E35A at byte 93361165
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:14 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   11946
# Exec time      4      4s    81us    19ms   365us     2ms   753us   144us
# Lock time      3    29ms       0     3ms     2us     1us    37us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  11.67k       1       1       1       1       0       1
# Bytes sent     0 606.63k      52      52      52      52       0      52
# Query size     5   1.74M     153     153     153     153       0     153
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  11.67k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 11909 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (1/0%)... 11943 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'unread_announcements'\G
#    SHOW CREATE TABLE `unread_announcements`\G
UPDATE `unread_announcements` SET `is_deleted` = true WHERE `announcement_id` = '01G7KJP2TE7DQQ9N8WE2C95SYH' AND `user_id` = '01FF6J8XP2PNNQWK9ZZ409TB47'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  `is_deleted` = true from `unread_announcements` where  `announcement_id` = '01G7KJP2TE7DQQ9N8WE2C95SYH' AND `user_id` = '01FF6J8XP2PNNQWK9ZZ409TB47'\G

# Query 10: 157.02 QPS, 0.07x concurrency, ID 0x6C0FF098D63D248BBF3D40588EFB42EF at byte 129910351
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3    9892
# Exec time      3      4s   115us    33ms   424us     2ms   993us   185us
# Lock time      5    42ms       0    15ms     4us     1us   154us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   9.66k       1       1       1       1       0       1
# Bytes sent     0 502.33k      52      52      52      52       0      52
# Query size     4   1.60M     169     171  170.00  166.51       0  166.51
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp   77   9.66k       1       1       1       1       0       1
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  28.98k       3       3       3       3       0       3
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd     100   9.66k       1       1       1       1       0       1
# Read rnd nex  11  19.32k       2       2       2       2       0       2
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 9855 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (1/0%)... 9889 more
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'submissions'\G
#    SHOW CREATE TABLE `submissions`\G
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
UPDATE `submissions` JOIN `users` ON `users`.`id` = `submissions`.`user_id` SET `score` = 73 WHERE `users`.`code` = 'S04193' AND `class_id` = '01G7KJP9ZA5FD7CCVFTZ25E98X'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  `score` = 73 from `submissions` JOIN `users` ON `users`.`id` = `submissions`.`user_id` where  `users`.`code` = 'S04193' AND `class_id` = '01G7KJP9ZA5FD7CCVFTZ25E98X'\G

# Query 11: 168.29 QPS, 0.06x concurrency, ID 0x98DD1BA507AB79261637698A8004A814 at byte 46817316
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   10602
# Exec time      3      4s    71us    37ms   361us     1ms     1ms   125us
# Lock time      4    36ms       0     3ms     3us     1us    51us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Bytes sent     0 113.89k      11      11      11      11       0      11
# Query size     6   2.31M     202     328  228.74  271.23   28.86  212.52
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0       2       0       1    0.00       0    0.01       0
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 10576 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 10598 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'submissions'\G
#    SHOW CREATE TABLE `submissions`\G
INSERT INTO `submissions` (`user_id`, `class_id`, `file_name`) VALUES ('01FF6J8XM6PX7S3APCW1C1WHYK', '01G7KJNHAMTR56DYJSRK22R76M', '量子生命モデリング第二_第三回講義_S01121.pdf') ON DUPLICATE KEY UPDATE `file_name` = VALUES(`file_name`)\G

# Query 12: 230.83 QPS, 0.06x concurrency, ID 0x4A879C906EDA9FDE22E01B64DA82E819 at byte 55776336
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   14542
# Exec time      3      4s    55us    24ms   248us   972us   574us   103us
# Lock time      4    38ms       0     3ms     2us     1us    43us     1us
# Rows sent      3  14.20k       1       1       1       1       0       1
# Rows examine   0  11.67k       0       1    0.82    0.99    0.38    0.99
# Bytes sent     1 894.67k      63      63      63      63       0      63
# Query size     5   1.80M     130     130     130     130       0     130
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  14.20k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 14498 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 14535 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################
# 100us  ################################################################
#   1ms  #####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'registrations'\G
#    SHOW CREATE TABLE `registrations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM `registrations` WHERE `course_id` = '01G7KJN55VF513BZ6A278HZ38A' AND `user_id` = '01FF6J8XVJBTEXYPR0GRR9H982'\G

# Query 13: 183.68 QPS, 0.06x concurrency, ID 0x34680D6218DB2F97EAE350D366B60E94 at byte 70506290
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   11572
# Exec time      3      4s    49us    40ms   312us     1ms     1ms    93us
# Lock time      2    22ms       0     3ms     1us     1us    31us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Bytes sent     0 124.31k      11      11      11      11       0      11
# Query size     4   1.47M     133     133     133     133       0     133
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0       0       0       0       0       0       0       0
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 11554 more
# Hosts        localhost
# Start        2022-07-10... (1/0%), 2022-07-10... (1/0%)... 11570 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ########################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'unread_announcements'\G
#    SHOW CREATE TABLE `unread_announcements`\G
INSERT INTO `unread_announcements` (`announcement_id`, `user_id`) VALUES ('01G7KJNTR0HEA14RERF1D3YZMK', '01FF6J8XVJBTEXYPR0GRR9H982')\G

# Query 14: 157.56 QPS, 0.04x concurrency, ID 0x83A9085E3002B5EB279F5514D406099F at byte 184457384
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:30
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   12132
# Exec time      3      3s    68us    15ms   272us   972us   469us   103us
# Lock time      5    45ms       0     2ms     3us     1us    42us     1us
# Rows sent      2  11.00k       0       1    0.93    0.99    0.26    0.99
# Rows examine   0  11.00k       0       1    0.93    0.99    0.26    0.99
# Bytes sent     1   1.12M      90      98   96.39   92.72    1.15   92.72
# Query size     4   1.62M     140     140     140     140       0     140
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  11.85k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 12104 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 12115 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'submissions'\G
#    SHOW CREATE TABLE `submissions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `submissions`.`score` FROM `submissions` WHERE `user_id` = '01FF6J8XZMECYBK60KWH3VPGJJ' AND `class_id` = '01G7KJP34JFZ828801K3NKCPHQ'\G

# Query 15: 176.90 QPS, 0.04x concurrency, ID 0x63C05502F034B2DB20500EA0606444D4 at byte 150210304
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   11145
# Exec time      2      3s    56us   110ms   229us   839us     1ms    93us
# Lock time     16   133ms       0   108ms    11us     1us   996us     1us
# Rows sent      2  10.88k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  10.88k       0       1    1.00    0.99    0.01    0.99
# Bytes sent     1   1.19M     106     112  112.00  107.34    0.07  107.34
# Query size     2 1012.19k      93      93      93      93       0      93
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  10.88k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 11121 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (1/0%)... 11142 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #####################################################
#   1ms  #####
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'classes'\G
#    SHOW CREATE TABLE `classes`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `submission_closed` FROM `classes` WHERE `id` = '01G7KJPHX7Z1YT7GYMZ594GFBG' FOR SHARE\G

# Query 16: 178.94 QPS, 0.04x concurrency, ID 0xD22122C68747429FE1B81D07D7E3DD52 at byte 49292220
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   11273
# Exec time      2      3s    55us    13ms   225us   839us   490us   103us
# Lock time      3    27ms       0     2ms     2us     1us    26us     1us
# Rows sent      2  11.01k       1       1       1       1       0       1
# Rows examine   0  11.01k       0       1    1.00    0.99    0.01    0.99
# Bytes sent     1 693.55k      63      63      63      63       0      63
# Query size     2 792.63k      72      72      72      72       0      72
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  11.01k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 11249 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 11268 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'courses'\G
#    SHOW CREATE TABLE `courses`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM `courses` WHERE `id` = '01G7KJN55SB7CX9BCDQSDKQAPZ'\G

# Query 17: 168.35 QPS, 0.04x concurrency, ID 0x2AD72D6A4885FC60A40B335011BFB61C at byte 31907339
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   10606
# Exec time      2      3s    63us    10ms   237us   925us   476us   108us
# Lock time      2    22ms       0     1ms     2us     1us    26us     1us
# Rows sent      2  10.36k       1       1       1       1       0       1
# Rows examine   0  10.36k       0       1    1.00    0.99    0.01    0.99
# Bytes sent     0 652.52k      63      63      63      63       0      63
# Query size     3   1.31M     130     130     130     130       0     130
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  10.36k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 10572 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (1/0%)... 10603 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #################
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'registrations'\G
#    SHOW CREATE TABLE `registrations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM `registrations` WHERE `user_id` = '01FF6J8XPMBKMFZM5P96AF2VFX' AND `course_id` = '01G7KJN55WG66Q2GPQ8CBHZG9Q'\G

# Query 18: 168.38 QPS, 0.04x concurrency, ID 0x0CE2A86226457A4A9046E173DE8DA5AA at byte 133703637
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   10608
# Exec time      2      2s    59us    10ms   210us   799us   430us    98us
# Lock time      3    25ms       0     3ms     2us     1us    33us     1us
# Rows sent      2  10.36k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  10.36k       0       1    1.00    0.99    0.01    0.99
# Bytes sent     1   1.01M      84     100  100.00   97.36    0.17   97.36
# Query size     2 849.47k      82      82      82      82       0      82
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0  10.36k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 10582 more
# Hosts        localhost
# Start        2022-07-10... (1/0%), 2022-07-10... (1/0%)... 10606 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #################################################
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'courses'\G
#    SHOW CREATE TABLE `courses`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `status` FROM `courses` WHERE `id` = '01G7KJN56SCAV7CTR0PYJXDGT3' FOR SHARE\G

# Query 19: 522.41 QPS, 0.03x concurrency, ID 0x9E2DA589A20EC24C34E11DDE0FBF5564 at byte 25107501
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   42838
# Exec time      2      2s     8us    17ms    50us    89us   206us    22us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Bytes sent     0 460.17k      11      11      11      11       0      11
# Query size     2 711.18k      17      17      17      17       0      17
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0       0       0       0       0       0       0       0
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 42759 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 42817 more
# Users        isucon
# Query_time distribution
#   1us  #
#  10us  ################################################################
# 100us  ##
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
START TRANSACTION\G

# Query 20: 93.48 QPS, 0.02x concurrency, ID 0x396201721CD58410E070DA9421CA8C8D at byte 92353962
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-10T08:12:13 to 2022-07-10T08:13:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    5889
# Exec time      1      1s    46us    13ms   222us   972us   488us    89us
# Lock time      1    13ms       0     3ms     2us     1us    38us     1us
# Rows sent      1   5.75k       1       1       1       1       0       1
# Rows examine   0   5.75k       1       1       1       1       0       1
# Bytes sent     3   2.40M     421     433  426.49  420.77       0  420.77
# Query size     1 362.31k      63      63      63      63       0      63
# Bytes receiv   0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Created tmp    0       0       0       0       0       0       0       0
# Errno          0       0       0       0       0       0       0       0
# Read first     0       0       0       0       0       0       0       0
# Read key       0   5.75k       1       1       1       1       0       1
# Read last      0       0       0       0       0       0       0       0
# Read next      0       0       0       0       0       0       0       0
# Read prev      0       0       0       0       0       0       0       0
# Read rnd       0       0       0       0       0       0       0       0
# Read rnd nex   0       0       0       0       0       0       0       0
# Sort merge p   0       0       0       0       0       0       0       0
# Sort range c   0       0       0       0       0       0       0       0
# Sort rows      0       0       0       0       0       0       0       0
# Sort scan co   0       0       0       0       0       0       0       0
# String:
# End          2022-07-10... (2/0%), 2022-07-10... (2/0%)... 5852 more
# Hosts        localhost
# Start        2022-07-10... (2/0%), 2022-07-10... (2/0%)... 5885 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##########################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `users` WHERE `id` = '01FF6J8XFVDB1DQD1CT96S3R1M'\G
